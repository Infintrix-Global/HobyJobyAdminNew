<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>


    <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
    <link rel="stylesheet" type="text/css" href="Style/style.css">

    <!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#config-web-app -->
    <!-- <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-database.js"></script> -->

    
    <script type="module">
   import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
   import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-analytics.js";
   import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAADC0o-0zy-R8WWzSY4hq_ckhLzNv6CHM",
    authDomain: "hobyjoby-8b9ca.firebaseapp.com",
    databaseURL: "https://hobyjoby-8b9ca-default-rtdb.firebaseio.com",
    projectId: "hobyjoby-8b9ca",
    storageBucket: "hobyjoby-8b9ca.appspot.com",
    messagingSenderId: "755782612092",
    appId: "1:755782612092:web:98ed2fb25735eb435985f9",
    measurementId: "G-L23JY97GH8"
  };


  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics();
  const db = getDatabase();
                                                                                                                                                                  


var cert= new Array();
const postListRef = await ref(db, "LoginPage");
onValue(postListRef, (snapshot) => {
  const data = snapshot.val();
   for(var i =0 ; i <  data.length ; i++){
        cert.push(data[i]);
   }
  // alert(data["Password"])
});

document.getElementById("submit1").addEventListener("click", function() {
    var  email = document.getElementById("validationCustom01").value;
    var  pass = document.getElementById("validationCustom02").value;
    var a = false;
    for(var i =0 ; i <=  cert.length ; i++){
      if(email == String(cert[i].Name) && pass == String(cert[i].Password)){
          sessionStorage.setItem("Name", String(cert[i].Name));
          sessionStorage.setItem("Password", String(cert[i].Password));
          sessionStorage.setItem("Type", String(cert[i].Type));
          sessionStorage.setItem("Index", i);
          a = true;
          window.location.replace("Certification.html");
      } 
    }
    if(a == false){
        alert("The Password or the email entered is incorrect");
      }
       
        // window.location.replace("/public/loginpage.html");
});

    </script>



    <script>
      (function () {
    'use strict';
    window.addEventListener('load', function () {
   
      var forms = document.getElementsByClassName('needs-validation');
    
      var validation = Array.prototype.filter.call(forms, function (form) {
        form.addEventListener('submit', function (event) {
          if (form.checkValidity() === false) {
            event.preventDefault();
            event.stopPropagation();
          } 
          form.classList.add('was-validated');
        }, false);
      });
    }, false);
  })();
    </script>
    <title>Login</title>
  <body>
     <!-- Example Code -->
    
     <div class="container">
      
        <div class="row justify-content-center">
          <div class="col-md-8">
            <div >
              <!-- <h1 class="text-center" style="color: white;">Login</h1> -->
              <div class="row text-center">
                <div class="col">
                  <img src="logoimage.png" alt="" class="logoimg">
              </div>
            </div>
              <form class="row g-3 needs-validation justify-content-center mt-4" novalidate="">
                <div class="col-md-8 mt-4">
                  <label for="validationCustom01" class="form-label" > Username</label>
                  <input type="text" class="form-control p-3 username" id="validationCustom01"  required="">
                  <div class="invalid-feedback">
                    Enter Username!
                  </div>
                  <div class="row mt-4"><div class="col"><label for="validationCustom01" class="form-label" >Password</label>
                    <input type="password" class="form-control p-3 passwordt" id="validationCustom02"  required="">
                    <div class="invalid-feedback">
                     Enter Password!
                    </div>
                    <div class="row mt-4">
                      <div class="col mt-3">
                        <button class="btn w-100 p-3 sub-btn" style="margin-bottom:20px;" type="button" id="submit1">Submit</button>
                      </div>
                    </div>
                  </div>
                </div>
                  </div>
            
                </div>
          </div>
        </div>
          
          </form>
        </div>
      </div>
      
      <!-- End Example Code -->

  </body>
</html>